<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>RC CAR CLOUD CONTROL</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <style>
    body { font-family: Arial; text-align: center; }
    button { font-size: 20px; margin: 10px; padding: 15px 30px; }
  </style>
</head>
<body>

<h1>ğŸš— RC CAR (Cloud Control)</h1>
<p id="status">Connecting...</p>

<button onclick="send('forward')">â¬† Forward</button><br>
<button onclick="send('left')">â¬… Left</button>
<button onclick="send('stop')">â¹ Stop</button>
<button onclick="send('right')">â¡ Right</button><br>
<button onclick="send('backward')">â¬‡ Backward</button><br><br>

<button onclick="light('on')">ğŸ’¡ LED ON</button>
<button onclick="light('off')">ğŸ’¡ LED OFF</button><br><br>

<button onmousedown="horn('on')" onmouseup="horn('off')">ğŸ”Š HORN</button>

<script>
  const client = mqtt.connect(
    'wss://broker.hivemq.com:8884/mqtt',
    {
      clientId: 'WEB_RC_' + Math.random().toString(16).substr(2, 8),
      clean: true,
      connectTimeout: 4000,
      reconnectPeriod: 1000
    }
  );

  client.on('connect', () => {
    document.getElementById('status').innerText = 'ğŸŸ¢ Connected to HiveMQ';
    console.log('MQTT connected');
  });

  client.on('error', (err) => {
    console.error('MQTT error', err);
    document.getElementById('status').innerText = 'ğŸ”´ MQTT Error';
  });

  function send(cmd) {
    client.publish('mity/rc/001/move', cmd);
  }

  function light(state) {
    client.publish('mity/rc/001/light', state);
  }

  function horn(state) {
    client.publish('mity/rc/001/horn', state);
  }
</script>
</body>

</html>
